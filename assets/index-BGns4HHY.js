var w=Object.defineProperty;var x=(o,t,e)=>t in o?w(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>x(o,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();function r({tag:o,className:t,text:e}){const s=document.createElement(o);return s.className=t,s.innerHTML=e||"",s}class u{constructor(t){i(this,"title");this.title=t}render(){return r({tag:"h1",className:"h1",text:this.title})}}class l{static addList(t){localStorage.setItem(this.key,t)}static getList(){return localStorage.getItem(this.key)||""}static setNextId(t){localStorage.setItem(this.nextIdKey,String(t))}static getNextId(){return Number(localStorage.getItem(this.nextIdKey))||0}}i(l,"key","list"),i(l,"nextIdKey","nextId");class p{constructor({text:t,inputmode:e="text",onChange:s}){i(this,"element");this.element=r({tag:"input",className:"input"}),this.element.placeholder=t,this.element.type=e,this.element.addEventListener("input",()=>{s&&s(this.element.value)})}}class d{constructor(t,e){i(this,"element");i(this,"title");this.title=t,this.element=r({tag:"button",className:"button",text:this.title}),e&&this.element.addEventListener("click",e)}}class m{constructor(t,e,s){i(this,"id");i(this,"titleValue","");i(this,"weightValue","");i(this,"titleInput");i(this,"weightInput");i(this,"deleteButton");i(this,"onDataChange");this.id=t,this.onDataChange=s,this.titleInput=new p({text:"Title",onChange:n=>{this.titleValue=n,this.onDataChange()}}),this.weightInput=new p({text:"Weight",inputmode:"number",onChange:n=>{this.weightValue=n,s()}}),this.deleteButton=new d("Delete").element,this.deleteButton.addEventListener("click",e)}setInitialValues(t,e){this.titleValue=t,this.weightValue=e,this.titleInput.element.value=t,this.weightInput.element.value=e}toJSON(){return{id:this.id,title:this.titleValue,weight:this.weightValue}}render(){const t=r({tag:"li",className:"li",text:`#${this.id}`});t.append(this.titleInput.element),t.append(this.weightInput.element);const e=this.deleteButton;return t.append(e),t}}class g{constructor(){i(this,"options",[]);i(this,"listElement");i(this,"nextId");this.listElement=r({tag:"ul",className:"ul"}),this.nextId=0,this.loadOptions()}loadOptions(){const t=l.getList(),e=l.getNextId();t?JSON.parse(t).forEach(n=>{const a=new m(n.id,()=>this.deleteOption(n.id),()=>this.updateStorage());a.setInitialValues(n.title,n.weight),this.options.push(a)}):this.addOption(),this.nextId=e||(this.options.length?Math.max(...this.options.map(s=>s.id)):0),this.render()}updateStorage(){l.addList(JSON.stringify(this.options))}addOption(){this.nextId=this.options.length>0?this.nextId+1:1;const t=this.nextId;l.setNextId(t);const e=new m(t,()=>this.deleteOption(t),()=>this.updateStorage());this.options.push(e),this.render(),this.updateStorage()}deleteOption(t){const e=this.options.filter(s=>s.id!=t);this.options=e,this.render(),this.updateStorage()}clearList(){this.options=[],this.nextId=0,l.addList(""),l.setNextId(this.nextId),this.render(),this.updateStorage()}render(){const t=this.listElement;return t.innerHTML="",this.options.map(e=>{t.append(e.render())}),t}}class I{constructor(t){i(this,"button");i(this,"list");i(this,"element");this.button=new d("Add Option"),this.list=t,this.element=this.button.element}render(){return this.element.addEventListener("click",()=>{this.list.addOption()}),this.element}}class O{constructor(t){i(this,"button");i(this,"list");i(this,"element");this.button=new d("Clear list"),this.list=t,this.element=this.button.element}render(){return this.element.addEventListener("click",()=>{this.list.clearList()}),this.element}}class v{constructor(t){i(this,"button");i(this,"element");i(this,"onStart");this.onStart=t,this.button=new d("Start"),this.element=this.button.element,this.element.addEventListener("click",()=>{this.onStart()})}render(){return this.element}}class b{constructor(t){i(this,"container");i(this,"list");i(this,"onStart");this.onStart=t,this.container=r({tag:"div",className:"options-page"}),this.list=new g,this.container.append(this.list.render());const e=new I(this.list).render();this.container.append(e);const s=new O(this.list).render();this.container.append(s);const n=new v(this.onStart).render();this.container.append(n)}getElement(){return this.container}}class L{constructor(t){i(this,"canvas");i(this,"ctx");i(this,"options");this.options=t,this.canvas=document.createElement("canvas"),this.canvas.width=400,this.canvas.height=400,this.ctx=this.canvas.getContext("2d"),this.drawWheel()}getElement(){return this.canvas}drawWheel(){if(!this.ctx||this.options.length===0)return;const t=this.options.reduce((s,n)=>s+n.weight,0);let e=0;this.options.forEach(s=>{if(!this.ctx)return;const n=s.weight/t*2*Math.PI;this.ctx.beginPath(),this.ctx.moveTo(200,200),this.ctx.arc(200,200,180,e,e+n),this.ctx.closePath(),this.ctx.fillStyle=s.color,this.ctx.fill(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.fillStyle="#000",this.ctx.font="14px Arial";const a=e+n/2,c=200+Math.cos(a)*100,f=200+Math.sin(a)*100;this.ctx.fillText(s.title,c,f),e+=n})}}class h{constructor(t){i(this,"container");i(this,"onBack");i(this,"options",[]);this.onBack=t,this.container=r({tag:"div",className:"decision_picker"}),this.render(),this.loadOptions()}static getRandomColor(){return`hsl(${Math.random()*360}, 100%, 70%)`}static shuffleArray(t){return t.sort(()=>Math.random()-.5)}render(){const t=r({tag:"canvas",className:"wheel-canvas"});t.setAttribute("width","400"),t.setAttribute("height","400");const e=r({tag:"div",className:"decision_panel"}),s=r({tag:"button",className:"button__back",text:"Back"});s.addEventListener("click",()=>{this.onBack()}),e.append(s),this.container.append(e)}getElement(){return this.container}loadOptions(){const e=new g().options.filter(n=>n.titleValue.trim()!==""&&Number(n.weightValue)>0).map(n=>({title:n.titleValue,weight:Number(n.weightValue),color:h.getRandomColor()}));if(e.length<2)return;this.options=h.shuffleArray(e);const s=new L(this.options).getElement();this.container.append(s)}}document.addEventListener("DOMContentLoaded",()=>{const o=document.createElement("div");o.id="app",document.body.appendChild(o);function t(){window.location.hash="#main",o.innerHTML="";const s=new u("Decision Making Tool").render();o.append(s);const n=new b(()=>{e()});o.append(n.getElement())}function e(){window.location.hash="#decision-picker",o.innerHTML="";const s=new u("Decision Making Tool").render();o.append(s);const n=new h(()=>{t()});o.append(n.getElement())}t()});
