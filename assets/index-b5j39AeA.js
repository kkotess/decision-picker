var b=Object.defineProperty;var E=(o,t,e)=>t in o?b(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>E(o,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function d({tag:o,className:t,text:e}){const i=document.createElement(o);return i.className=t,i.innerHTML=e||"",i}class w{constructor(t){s(this,"title");this.title=t}render(){return d({tag:"h1",className:"h1",text:this.title})}}class u{static addList(t){localStorage.setItem(this.key,t)}static getList(){return localStorage.getItem(this.key)||""}static setNextId(t){localStorage.setItem(this.nextIdKey,String(t))}static getNextId(){return Number(localStorage.getItem(this.nextIdKey))||0}}s(u,"key","list"),s(u,"nextIdKey","nextId");class f{constructor({text:t,inputmode:e="text",onChange:i}){s(this,"element");this.element=d({tag:"input",className:"input"}),this.element.placeholder=t,this.element.type=e,this.element.addEventListener("input",()=>{i&&i(this.element.value)})}}class m{constructor(t,e){s(this,"element");s(this,"title");this.title=t,this.element=d({tag:"button",className:"button",text:this.title}),e&&this.element.addEventListener("click",e)}}class I{constructor(t,e,i){s(this,"id");s(this,"titleValue","");s(this,"weightValue","");s(this,"titleInput");s(this,"weightInput");s(this,"deleteButton");s(this,"onDataChange");this.id=t,this.onDataChange=i,this.titleInput=new f({text:"Title",onChange:n=>{this.titleValue=n,this.onDataChange()}}),this.weightInput=new f({text:"Weight",inputmode:"number",onChange:n=>{this.weightValue=n,i()}}),this.deleteButton=new m("Delete").element,this.deleteButton.addEventListener("click",e)}setInitialValues(t,e){this.titleValue=t,this.weightValue=e,this.titleInput.element.value=t,this.weightInput.element.value=e}toJSON(){return{id:this.id,title:this.titleValue,weight:this.weightValue}}render(){const t=d({tag:"li",className:"li",text:`#${this.id}`});t.append(this.titleInput.element),t.append(this.weightInput.element);const e=this.deleteButton;return t.append(e),t}}class S{constructor(){s(this,"options",[]);s(this,"listElement");s(this,"nextId");this.listElement=d({tag:"ul",className:"ul"}),this.nextId=0,this.loadOptions()}loadOptions(){const t=u.getList(),e=u.getNextId();t?JSON.parse(t).forEach(n=>{const r=new I(n.id,()=>this.deleteOption(n.id),()=>this.updateStorage());r.setInitialValues(n.title,n.weight),this.options.push(r)}):this.addOption(),this.nextId=e||(this.options.length?Math.max(...this.options.map(i=>i.id)):0),this.render()}updateStorage(){u.addList(JSON.stringify(this.options))}addOption(){this.nextId=this.options.length>0?this.nextId+1:1;const t=this.nextId;u.setNextId(t);const e=new I(t,()=>this.deleteOption(t),()=>this.updateStorage());this.options.push(e),this.render(),this.updateStorage()}deleteOption(t){const e=this.options.filter(i=>i.id!=t);this.options=e,this.render(),this.updateStorage()}clearList(){this.options=[],this.nextId=0,u.addList(""),u.setNextId(this.nextId),this.render(),this.updateStorage()}render(){const t=this.listElement;return t.innerHTML="",this.options.map(e=>{t.append(e.render())}),t}}class y{constructor(t){s(this,"button");s(this,"list");s(this,"element");this.button=new m("Add Option"),this.list=t,this.element=this.button.element}render(){return this.element.addEventListener("click",()=>{this.list.addOption()}),this.element}}class k{constructor(t){s(this,"button");s(this,"list");s(this,"element");this.button=new m("Clear list"),this.list=t,this.element=this.button.element}render(){return this.element.addEventListener("click",()=>{this.list.clearList()}),this.element}}class L{constructor(t){s(this,"button");s(this,"element");s(this,"onStart");this.onStart=t,this.button=new m("Start"),this.element=this.button.element,this.element.addEventListener("click",()=>{this.onStart()})}render(){return this.element}}class N{constructor(t){s(this,"container");s(this,"list");s(this,"onStart");this.onStart=t,this.container=d({tag:"div",className:"options-page"}),this.list=new S,this.container.append(this.list.render());const e=new y(this.list).render();this.container.append(e);const i=new k(this.list).render();this.container.append(i);const n=new L(this.onStart).render();this.container.append(n)}getElement(){return this.container}}class B{constructor(t){this.ctx=t}drawSector(t,e,i,n,r,h){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.arc(t,e,i,n,n+r),this.ctx.closePath(),this.ctx.fillStyle=h,this.ctx.fill(),this.ctx.strokeStyle="#000",this.ctx.lineWidth=2,this.ctx.stroke()}}class T{constructor(t){this.ctx=t}drawSectorText(t,e,i,n,r,h,l){const a=2*i*Math.sin(r/2);if(a<l){n+=r;return}this.ctx.font="14px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle";const p=h;let c=p;if(this.ctx.measureText(p).width>a)for(;c.length>0&&this.ctx.measureText(c).width>a;)c=c.slice(0,-1);if(c.length===0){n+=r;return}c!==p&&(c=c+"...");const x=n+r/2,v=t+i*Math.cos(x),O=e+i*Math.sin(x);this.ctx.save(),this.ctx.translate(v,O),this.ctx.rotate(x),this.ctx.lineWidth=2,this.ctx.strokeStyle="#fff",this.ctx.strokeText(c,0,0),this.ctx.fillStyle="#000",this.ctx.fillText(c,0,0),this.ctx.restore()}}class D{constructor(t){this.ctx=t}drawCenterElement(t,e,i,n="#fff",r="#000"){this.ctx.beginPath(),this.ctx.arc(t,e,i,0,2*Math.PI),this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.strokeStyle=r,this.ctx.lineWidth=2,this.ctx.stroke()}}class C{constructor(t){this.ctx=t}drawCenterElement(t,e,i,n="#fff",r="#000"){this.ctx.beginPath();const h=t,l=e-i+15,a=t-10,p=e-i-10,c=t+10,g=e-i-10;this.ctx.moveTo(h,l),this.ctx.lineTo(c,g),this.ctx.lineTo(a,p),this.ctx.closePath(),this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.strokeStyle=r,this.ctx.lineWidth=2,this.ctx.stroke()}}class M{constructor(t){s(this,"canvas");s(this,"ctx");s(this,"options");s(this,"centerX",200);s(this,"centerY",200);s(this,"radius",180);this.options=t,this.canvas=document.createElement("canvas"),this.canvas.width=400,this.canvas.height=400,this.ctx=this.canvas.getContext("2d"),this.drawWheel()}getElement(){return this.canvas}drawWheel(){if(!this.ctx||this.options.length===0)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const t=this.options.reduce((l,a)=>l+a.weight,0);let e=0;const i=new B(this.ctx),n=new T(this.ctx);this.options.forEach(l=>{if(!this.ctx)return;const a=l.weight/t*2*Math.PI;i.drawSector(this.centerX,this.centerY,this.radius,e,a,l.color),n.drawSectorText(this.centerX,this.centerY,100,e,a,l.title,30),e+=a}),new D(this.ctx).drawCenterElement(this.centerX,this.centerY,25),new C(this.ctx).drawCenterElement(this.centerX,this.centerY,this.radius)}}function P(){return`hsl(${Math.random()*360}, 100%, 70%)`}function V(o){return o.sort(()=>Math.random()-.5)}class W{constructor(t){s(this,"button");s(this,"element");s(this,"onBack");this.onBack=t,this.button=new m("Back"),this.element=this.button.element,this.element.addEventListener("click",()=>{this.onBack()})}render(){return this.element}}class A{constructor(t){s(this,"container");s(this,"onBack");s(this,"options",[]);this.onBack=t,this.container=d({tag:"div",className:"decision_picker"}),this.render(),this.loadOptions()}render(){const t=d({tag:"canvas",className:"wheel-canvas"});t.setAttribute("width","400"),t.setAttribute("height","400");const e=d({tag:"div",className:"decision_panel"}),i=new W(this.onBack).render();e.append(i),this.container.append(e)}getElement(){return this.container}loadOptions(){const e=new S().options.filter(n=>n.titleValue.trim()!==""&&Number(n.weightValue)>0).map(n=>({title:n.titleValue,weight:Number(n.weightValue),color:P()}));if(e.length<2)return;this.options=V(e);const i=new M(this.options).getElement();this.container.append(i)}}document.addEventListener("DOMContentLoaded",()=>{const o=document.createElement("div");o.id="app",document.body.appendChild(o);function t(){window.location.hash="#main",o.innerHTML="";const i=new w("Decision Making Tool").render();o.append(i);const n=new N(()=>{e()});o.append(n.getElement())}function e(){window.location.hash="#decision-picker",o.innerHTML="";const i=new w("Decision Making Tool").render();o.append(i);const n=new A(()=>{t()});o.append(n.getElement())}t()});
